<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FarmaFácil - Perfil da Farmácia</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --tech-purple: #2E1A47;
            --deep-purple: #1a0f2e;
            --card-bg: rgba(46, 26, 71, 0.6);
            --neon-mint: #69FFC2;
            --pure-white: #FFFFFF;
            --gray-text: #a0a0b0;
            --warning-red: #ff4757;
            --alert-orange: #ff9800;
            --success-green: #00E676;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }

        body { background-color: var(--deep-purple); color: var(--pure-white); height: 100vh; display: flex; overflow: hidden; }

        /* SIDEBAR */
        .sidebar { width: 260px; background: #150b24; padding: 20px; display: flex; flex-direction: column; border-right: 1px solid rgba(255,255,255,0.05); }
        .brand { display: flex; align-items: center; gap: 10px; font-size: 1.4rem; font-weight: 800; margin-bottom: 40px; color: var(--pure-white); }
        .brand span { color: var(--neon-mint); }
        
        .nav-item { 
            padding: 12px 15px; border-radius: 8px; color: var(--gray-text); cursor: pointer; 
            display: flex; align-items: center; gap: 10px; margin-bottom: 5px; transition: 0.3s; font-weight: 500;
        }
        .nav-item:hover, .nav-item.active { background: rgba(105, 255, 194, 0.1); color: var(--neon-mint); }
        .nav-section-title { font-size: 0.75rem; text-transform: uppercase; color: rgba(255,255,255,0.3); margin: 20px 0 10px 10px; letter-spacing: 1px; }

        /* MAIN CONTENT */
        .main-content { flex: 1; padding: 30px; overflow-y: auto; background: radial-gradient(circle at 10% 10%, rgba(46, 26, 71, 0.4), transparent 50%); }
        
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .header h1 { font-size: 1.8rem; }
        .user-admin { display: flex; align-items: center; gap: 10px; background: rgba(255,255,255,0.05); padding: 8px 15px; border-radius: 30px; }
        .status-dot { width: 8px; height: 8px; background: var(--success-green); border-radius: 50%; box-shadow: 0 0 5px var(--success-green); }

        /* CARDS DE MÉTRICAS */
        .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 30px; }
        .kpi-card { background: var(--card-bg); padding: 20px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.05); position: relative; overflow: hidden; }
        .kpi-card::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: var(--neon-mint); }
        .kpi-title { font-size: 0.85rem; color: var(--gray-text); margin-bottom: 10px; }
        .kpi-value { font-size: 2rem; font-weight: 700; color: white; }
        .kpi-trend { font-size: 0.8rem; color: var(--success-green); display: flex; align-items: center; gap: 5px; margin-top: 5px; }
        .kpi-trend.down { color: var(--warning-red); }

        /* TABELAS */
        .table-container { background: var(--card-bg); border-radius: 15px; padding: 20px; border: 1px solid rgba(255,255,255,0.05); }
        .table-header { display: flex; justify-content: space-between; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; color: var(--gray-text); padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); font-size: 0.9rem; }
        td { padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 0.95rem; }
        tr:hover { background: rgba(255,255,255,0.02); }
        
        .badge { padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: bold; }
        .badge-ok { background: rgba(0, 230, 118, 0.15); color: var(--success-green); }
        .badge-warn { background: rgba(255, 152, 0, 0.15); color: var(--alert-orange); }
        .badge-err { background: rgba(255, 71, 87, 0.15); color: var(--warning-red); }

        /* GESTÃO VISUAL DE ESTOQUE (A MÁQUINA) */
        .machine-layout-view { display: grid; grid-template-columns: 300px 1fr; gap: 30px; height: 500px; }
        .machine-selector { background: var(--card-bg); padding: 20px; border-radius: 15px; }
        
        .machine-grid-visual { 
            display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(4, 1fr); 
            gap: 10px; background: #150b24; padding: 20px; border-radius: 15px; border: 2px solid #4a3b69;
        }
        .grid-slot { 
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px;
            display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer;
            transition: 0.2s; position: relative;
        }
        .grid-slot:hover { background: rgba(105, 255, 194, 0.1); border-color: var(--neon-mint); }
        .grid-slot.empty { border: 1px dashed var(--warning-red); opacity: 0.5; }
        .slot-id { position: absolute; top: 5px; left: 5px; font-size: 0.7rem; color: var(--gray-text); }
        .slot-qty { font-size: 1.2rem; font-weight: bold; color: var(--neon-mint); }
        .slot-name { font-size: 0.7rem; text-align: center; margin-top: 5px; }

        /* BOTÕES */
        .btn-primary { background: var(--neon-mint); color: var(--tech-purple); border: none; padding: 10px 20px; border-radius: 8px; font-weight: 700; cursor: pointer; display: flex; align-items: center; gap: 8px; }
        .btn-primary:hover { background: var(--mint-hover); }
        
        .btn-icon { background: none; border: none; color: var(--gray-text); cursor: pointer; }
        .btn-icon:hover { color: var(--pure-white); }

        /* SEÇÕES */
        .section-view { display: none; animation: fadeIn 0.3s; }
        .section-view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* MODAL EDITAR SLOT */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; display: none; justify-content: center; align-items: center; }
        .modal-content { background: #2a1b3d; padding: 30px; border-radius: 15px; width: 400px; border: 1px solid var(--neon-mint); }
        .form-group { margin-bottom: 15px; }
        .form-label { display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--gray-text); }
        .form-input, .form-select { width: 100%; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 5px; outline: none; }
        
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="brand"><span class="material-icons">local_pharmacy</span> Farma<span>Fácil</span> Admin</div>
        
        <div class="nav-section-title">Geral</div>
        <div class="nav-item active" onclick="showSection('dashboard', this)"><span class="material-icons">dashboard</span> Dashboard</div>
        <div class="nav-item" onclick="showSection('machines', this)"><span class="material-icons">dns</span> Máquinas</div>
        <div class="nav-item" onclick="showSection('products', this)"><span class="material-icons">medication</span> Produtos</div>
        
        <div class="nav-section-title">Operacional</div>
        <div class="nav-item" onclick="showSection('stock', this)"><span class="material-icons">grid_view</span> Mapa de Estoque</div>
        <div class="nav-item" onclick="showSection('telemed', this)"><span class="material-icons">medical_services</span> Telemedicina</div>
        <div class="nav-item" onclick="showSection('users', this)"><span class="material-icons">people</span> Usuários</div>

        <div style="margin-top: auto;">
            <div class="nav-item" style="color: var(--warning-red);" onclick="window.location.href='site_login.html'"><span class="material-icons">logout</span> Sair</div>
        </div>
    </div>

    <div class="main-content">
        
        <div class="header">
            <h1 id="pageTitle">Visão Geral</h1>
            <div class="user-admin">
                <div class="status-dot"></div>
                <span>Admin Logado</span>
            </div>
        </div>

        <div id="section-dashboard" class="section-view active">
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-title">Vendas Hoje</div>
                    <div class="kpi-value">R$ 4.250</div>
                    <div class="kpi-trend"><span class="material-icons" style="font-size: 1rem;">trending_up</span> +12% vs ontem</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-title">Máquinas Ativas</div>
                    <div class="kpi-value">24<span style="font-size:1rem; color:var(--gray-text)">/25</span></div>
                    <div class="kpi-trend down"><span class="material-icons" style="font-size: 1rem;">error</span> 1 Offline</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-title">Atendimentos Farmacêutico</div>
                    <div class="kpi-value">142</div>
                    <div class="kpi-trend"><span class="material-icons" style="font-size: 1rem;">check</span> 98% Aprovados</div>
                </div>
                <div class="kpi-card" style="border-color: var(--alert-orange);">
                    <div class="kpi-title">Estoque Crítico</div>
                    <div class="kpi-value" style="color: var(--alert-orange);">3 Máquinas</div>
                    <div class="kpi-trend" style="color: var(--alert-orange);">Necessitam Reposição</div>
                </div>
            </div>

            <div class="table-container" style="height: 300px; display:flex; justify-content:center; align-items:center; flex-direction:column; margin-bottom:30px;">
                <h3 style="align-self:flex-start; margin-bottom:20px;">Fluxo de Vendas (Últimas 24h)</h3>
                <canvas id="salesChart" style="width:100%; height:100%;"></canvas>
            </div>

            <div class="table-container">
                <div class="table-header"><h3>Transações Recentes</h3></div>
                <table>
                    <thead><tr><th>ID</th><th>Máquina</th><th>Produto</th><th>Valor</th><th>Status</th></tr></thead>
                    <tbody>
                        <tr><td>#9923</td><td>MQ-04 (Paulista)</td><td>Dorflex Uno</td><td>R$ 24,90</td><td><span class="badge badge-ok">Pago</span></td></tr>
                        <tr><td>#9922</td><td>MQ-12 (Metrô)</td><td>Amoxicilina 500mg</td><td>R$ 45,00</td><td><span class="badge badge-warn">Verificação Doc</span></td></tr>
                        <tr><td>#9921</td><td>MQ-01 (Condomínio)</td><td>Band-Aid</td><td>R$ 12,00</td><td><span class="badge badge-ok">Pago</span></td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="section-stock" class="section-view">
            <div class="machine-layout-view">
                
                <div class="machine-selector">
                    <h3 style="margin-bottom: 20px;">Selecione a Máquina</h3>
                    <select class="form-select" style="padding: 15px; margin-bottom: 20px;">
                        <option>MQ-04 - Av. Paulista (Online)</option>
                        <option>MQ-12 - Metrô Consolação (Online)</option>
                        <option>MQ-01 - Condomínio Viva (Critico)</option>
                    </select>
                    
                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                        <p style="font-size: 0.8rem; color: var(--gray-text); margin-bottom: 5px;">Temperatura Interna</p>
                        <h2 style="color: var(--neon-mint);">22°C</h2>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; margin-top: 10px;">
                        <p style="font-size: 0.8rem; color: var(--gray-text); margin-bottom: 5px;">Status da Porta</p>
                        <h4 style="color: var(--success-green);">TRANCADA <span class="material-icons" style="font-size:1rem; vertical-align:middle;">lock</span></h4>
                    </div>
                </div>

                <div class="machine-grid-visual" id="visualGrid">
                    </div>
            </div>
        </div>

        <div id="section-products" class="section-view">
            <div class="table-container">
                <div class="table-header">
                    <h3>Catálogo Global</h3>
                    <button class="btn-primary"><span class="material-icons">add</span> Novo Medicamento</button>
                </div>
                <table>
                    <thead><tr><th>Imagem</th><th>Nome</th><th>Categoria</th><th>Preço</th><th>Tarja</th><th>Ações</th></tr></thead>
                    <tbody>
                        <tr><td><span class="material-icons">medication</span></td><td>Dorflex Uno</td><td>Dor e Febre</td><td>R$ 24,90</td><td><span class="badge badge-ok">Livre</span></td><td><button class="btn-icon"><span class="material-icons">edit</span></button></td></tr>
                        <tr><td><span class="material-icons">vaccines</span></td><td>Amoxicilina</td><td>Antibiótico</td><td>R$ 45,00</td><td><span class="badge badge-err">Vermelha</span></td><td><button class="btn-icon"><span class="material-icons">edit</span></button></td></tr>
                        <tr><td><span class="material-icons">lock</span></td><td>Rivotril</td><td>Controlado</td><td>R$ 15,20</td><td><span class="badge badge-err">Preta</span></td><td><button class="btn-icon"><span class="material-icons">edit</span></button></td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="section-machines" class="section-view"><div class="table-container"><h3>Gestão de Máquinas (Lista)</h3><p>Lista de todos os pontos de venda...</p></div></div>
        <div id="section-telemed" class="section-view"><div class="table-container"><h3>Histórico de Telemedicina</h3><p>Logs de vídeo chamadas...</p></div></div>
        <div id="section-users" class="section-view"><div class="table-container"><h3>Base de Usuários</h3><p>Gestão de clientes e documentos...</p></div></div>

    </div>

    <div id="stockModal" class="modal-overlay">
        <div class="modal-content">
            <h3 style="margin-bottom: 20px;">Editar Slot <span id="slotIdDisplay" style="color:var(--neon-mint)">A1</span></h3>
            <div class="form-group">
                <label class="form-label">Medicamento</label>
                <select class="form-select">
                    <option>Dorflex Uno</option>
                    <option>Neosaldina</option>
                    <option>Amoxicilina</option>
                    <option>Vazio</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Quantidade Atual</label>
                <input type="number" class="form-input" value="10">
            </div>
            <div class="form-group">
                <label class="form-label">Data de Validade do Lote</label>
                <input type="date" class="form-input" style="color-scheme: dark;">
            </div>
            <button class="btn-primary" style="width: 100%; justify-content: center;" onclick="closeModal()">Salvar Slot</button>
            <button class="btn-icon" style="width: 100%; margin-top: 10px;" onclick="closeModal()">Cancelar</button>
        </div>
    </div>

    <script>
        // Lógica de Navegação (Tabs)
        function showSection(sectionId, element) {
            // Atualiza Menu
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            
            // Atualiza Conteúdo
            document.querySelectorAll('.section-view').forEach(el => el.classList.remove('active'));
            document.getElementById('section-' + sectionId).classList.add('active');
            
            // Atualiza Título
            document.getElementById('pageTitle').textContent = element.innerText;
        }

        // Lógica do Mapa de Estoque (Gerar Grid)
        const gridContainer = document.getElementById('visualGrid');
        const productsMock = ['Dorflex', 'Neosaldina', 'Advil', 'Torsilax', 'Amoxicilina', 'Rivotril', 'Vazio', 'Vazio'];
        
        for(let i=0; i<16; i++) {
            const prodName = productsMock[i % productsMock.length];
            const qty = prodName === 'Vazio' ? 0 : Math.floor(Math.random() * 15);
            const isLow = qty > 0 && qty < 5;
            
            const slot = document.createElement('div');
            slot.className = `grid-slot ${prodName === 'Vazio' ? 'empty' : ''}`;
            if(isLow) slot.style.border = '1px solid var(--alert-orange)';
            
            slot.innerHTML = `
                <span class="slot-id">Slot ${i+1}</span>
                <span class="slot-qty" style="color: ${isLow ? 'var(--alert-orange)' : 'var(--neon-mint)'}">${qty}</span>
                <span class="slot-name">${prodName}</span>
            `;
            slot.onclick = () => openStockModal(i+1);
            gridContainer.appendChild(slot);
        }

        // Modais
        function openStockModal(id) {
            document.getElementById('slotIdDisplay').textContent = '#' + id;
            document.getElementById('stockModal').style.display = 'flex';
        }
        function closeModal() {
            document.getElementById('stockModal').style.display = 'none';
        }

        // Gráfico Simples (Chart.js)
        const ctx = document.getElementById('salesChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['08h', '10h', '12h', '14h', '16h', '18h', '20h', '22h'],
                datasets: [{
                    label: 'Vendas (R$)',
                    data: [120, 450, 300, 600, 400, 850, 900, 630],
                    borderColor: '#69FFC2',
                    backgroundColor: 'rgba(105, 255, 194, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                plugins: { legend: { display: false } },
                scales: {
                    y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)' } },
                    x: { grid: { display: false } }
                }
            }
        });
    </script>

</body>
</html>